"use strict";(()=>{var c=[],G=()=>{for(let e=0;e<6;e++){let l=document.createElement("div");l.setAttribute("id",`row-${e}`),l.setAttribute("class","gridrows"),document.getElementById("grid").append(l),c.push([]);for(let o=0;o<7;o++){c[e].push(null);let t=document.createElement("div");t.setAttribute("id",`row-${e}-column-${o}`),t.setAttribute("class","emptySlots"),document.getElementById(`row-${e}`).append(t)}}console.log(c),console.log("createGrid was called")},u=()=>((c.length<1||c==null)&&G(),c),a=e=>{c=e};var r=1,s=2,g=0,C=1,n=!1,m=42;function b(e,l,o,t,i){return n||(console.log(`takeTurn was called with row: ${e}, column: ${l}`),t[e][l]!=null?console.log("This space has already been used"):(t[e][l]=i,a(t),m-=1,console.log(m),m==0&&T(!0))),console.log(u()),u()}function h(e){return console.log(e),e===r?e=s:e=r,console.log("Switch player called. Current player is",e),e}function P(e){if(console.log("checkWinner was called"),console.log(`turns = ${m}`),e[0][0]!=null&&e[0][0]==e[1][1]&&e[0][0]==e[2][2])return console.log(e[0][0]),console.log(typeof e[0][0]),e[0][0]==s?(n=!0,s):(n=!0,r);if(e[0][2]!=null&&e[0][2]==e[1][1]&&e[0][2]==e[2][0])return console.log(e[0][2]),console.log(typeof e[0][2]),e[0][2]==s?(n=!0,s):(n=!0,r);for(let l=0;l<6;l++){if(e[l][0]!=null&&e[l][0]==e[l][1]&&e[l][0]==e[l][2])return console.log(e[l][0]),console.log(typeof e[l][0]),e[l][0]==s?(n=!0,s):(n=!0,r);if(e[0][l]!=null&&e[0][l]==e[1][l]&&e[0][l]==e[2][l])return console.log(e[l][0]),console.log(typeof e[l][0]),e[l][0]==s?(n=!0,s):(n=!0,r);if(m===0)return n=!0,g}}function y(){console.log("resetGame was called"),n=!1,m=42,a([]),u(),v()}function p(){return C}function $(e){C=e}function k(){return n}function T(e){n=e}var z=document.getElementById("winner-name"),d=document.getElementById("winner-display");var I=[r,s,g];function E(){for(let e=0;e<6;e++)for(let l=0;l<7;l++)document.getElementById(`row-${e}-column-${l}`).innerHTML=""}function S(e){console.log("populateHtmlGridWithBoardState was called with",e),E();for(let l=0;l<6;l++)for(let o=0;o<7;o++){if(!e[l][o])continue;let t=e[l][o]===r?"redSlots":"yellowSlots";document.getElementById(`row-${l}-column-${o}`).className=t}}function O(e,l){console.log(`positionClick was called with rowIndex=${e}, columnIndex=${l},`);let o=structuredClone(u()),t=b(e,l,k(),u(),p());if(JSON.stringify(t)!==JSON.stringify(o)){a(t),$(h(p())),S(t);let i=P(t);if(console.log(i),i){if(typeof i!="string"||!I.includes(i))throw`Expecting "checkWinner" to return null or one of the strings ${I}. Actually received: ${i}`;i===0?(d.innerText="Its a draw, you both lose",d.style.backgroundColor="red"):d.innerText=`The winner is ${i}`,d.style.backgroundColor="red"}}}function W(e){y(),d.style.backgroundColor="white",E()}var v=()=>{for(let e=0;e<6;e++)for(let l=0;l<7;l++)document.getElementById(`row-${e}-column-${l}`).addEventListener("click",O.bind(null,e,l))},A=document.getElementById("reset-button");A.addEventListener("click",W);y();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYm9hcmQudHMiLCAiLi4vYWNhZGVteS50cyIsICIuLi9jb25uZWN0b3JzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgdHlwZSBQbGF5ZXIgPSAxIHwgMiB8IG51bGwgfCAwIHwgdW5kZWZpbmVkO1xuZXhwb3J0IHR5cGUgQ2VsbCA9IFBsYXllcjtcbmV4cG9ydCBjb25zdCByb3dzOiBudW1iZXIgPSA2O1xuZXhwb3J0IGNvbnN0IGNvbHVtbnM6IG51bWJlciA9IDc7XG5leHBvcnQgY29uc3Qgd2luTnVtYmVyOiBudW1iZXIgPSA0O1xuZXhwb3J0IGNvbnN0IG1heHR1cm5zOiBudW1iZXIgPSByb3dzICogY29sdW1uc1xubGV0IGdyaWQ6IENlbGxbXVtdID0gW107XG5cbmNvbnN0IGNyZWF0ZUdyaWQgPSAoKSA9PiB7XG4gIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCByb3dzOyByb3dJbmRleCsrKSB7XG4gICAgbGV0IHJvd0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcm93RGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIGByb3ctJHtyb3dJbmRleH1gKTtcbiAgICByb3dEaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJncmlkcm93c1wiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyaWRcIikhLmFwcGVuZChyb3dEaXYpO1xuICAgIGdyaWQucHVzaChbXSlcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgY29sdW1uczsgY29sdW1uSW5kZXgrKykge1xuICAgICAgZ3JpZFtyb3dJbmRleF0ucHVzaChudWxsKTtcbiAgICAgIGxldCBjb2xEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIGByb3ctJHtyb3dJbmRleH0tY29sdW1uLSR7Y29sdW1uSW5kZXh9YCk7XG4gICAgICBjb2xEaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbXB0eVNsb3RzXCIpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHJvdy0ke3Jvd0luZGV4fWApIS5hcHBlbmQoY29sRGl2KTtcbiAgICB9XG4gIH1cbiAgY29uc29sZS5sb2coZ3JpZCk7XG4gIGNvbnNvbGUubG9nKGBjcmVhdGVHcmlkIHdhcyBjYWxsZWRgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRCb2FyZCA9ICgpID0+IHtcbiAgaWYgKGdyaWQubGVuZ3RoIDwgMSB8fCBncmlkID09IHVuZGVmaW5lZCkge1xuICAgIGNyZWF0ZUdyaWQoKVxuICB9XG4gIHJldHVybiBncmlkO1xufTtcbmV4cG9ydCBjb25zdCBzZXRCb2FyZCA9IChuZXdCb2FyZDogQ2VsbFtdW10pID0+IHtcbiAgZ3JpZCA9IG5ld0JvYXJkO1xufTtcbiIsICJpbXBvcnQgeyBQbGF5ZXIsIENlbGwsIGdldEJvYXJkLCBzZXRCb2FyZCwgbWF4dHVybnMsIHJvd3MgfSBmcm9tIFwiLi9ib2FyZFwiO1xuaW1wb3J0IHsgYmluZENsaWNrcyB9IGZyb20gXCIuL2Nvbm5lY3RvcnNcIjtcblxuZXhwb3J0IGNvbnN0IHJlZFBsYXllciA9IDE7XG5leHBvcnQgY29uc3QgeWVsbG93UGxheWVyID0gMjtcbmV4cG9ydCBjb25zdCBub2JvZHlUZXh0ID0gMDtcbmxldCBwbGF5ZXI6IFBsYXllciA9IDE7XG5sZXQgZ2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbmxldCB0dXJucyA9IG1heHR1cm5zO1xuXG5leHBvcnQgZnVuY3Rpb24gdGFrZVR1cm4oXG4gIHJvd0luZGV4OiBudW1iZXIsXG4gIGNvbHVtbkluZGV4OiBudW1iZXIsXG4gIGN1cnJlbnRHYW1lT3ZlcjogYm9vbGVhbixcbiAgY3VycmVudEJvYXJkOiBDZWxsW11bXSxcbiAgY3VycmVudFBsYXllcjogUGxheWVyXG4pOiBDZWxsW11bXSB7XG4gIGlmICghZ2FtZU92ZXIpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGB0YWtlVHVybiB3YXMgY2FsbGVkIHdpdGggcm93OiAke3Jvd0luZGV4fSwgY29sdW1uOiAke2NvbHVtbkluZGV4fWBcbiAgICApO1xuICAgIGlmIChjdXJyZW50Qm9hcmRbcm93SW5kZXhdW2NvbHVtbkluZGV4XSAhPSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlRoaXMgc3BhY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Qm9hcmRbcm93SW5kZXhdW2NvbHVtbkluZGV4XSA9IGN1cnJlbnRQbGF5ZXI7XG4gICAgICBzZXRCb2FyZChjdXJyZW50Qm9hcmQpO1xuICAgICAgdHVybnMgLT0gMTtcbiAgICAgIGNvbnNvbGUubG9nKHR1cm5zKTtcbiAgICAgIGlmICh0dXJucyA9PSAwKSB7XG4gICAgICAgIHNldEdhbWVPdmVyKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhnZXRCb2FyZCgpKVxuICByZXR1cm4gZ2V0Qm9hcmQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaFBsYXllcihjdXJyZW50UGxheWVyOiBQbGF5ZXIpOiBQbGF5ZXIge1xuICBjb25zb2xlLmxvZyhjdXJyZW50UGxheWVyKTtcbiAgaWYgKGN1cnJlbnRQbGF5ZXIgPT09IHJlZFBsYXllcikge1xuICAgIGN1cnJlbnRQbGF5ZXIgPSB5ZWxsb3dQbGF5ZXI7XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudFBsYXllciA9IHJlZFBsYXllcjtcbiAgfVxuICBjb25zb2xlLmxvZyhcIlN3aXRjaCBwbGF5ZXIgY2FsbGVkLiBDdXJyZW50IHBsYXllciBpc1wiLCBjdXJyZW50UGxheWVyKTtcbiAgcmV0dXJuIGN1cnJlbnRQbGF5ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1dpbm5lcihjdXJyZW50Qm9hcmQ6IENlbGxbXVtdKTogUGxheWVyIHsgLy9ORUVEIFRPIENIQU5HRSBUT08gTUFLRSBJVCBXT1JLIEZPUiBBTlkgU1BFQ0lGSUVEIExFTkdUSFxuICBjb25zb2xlLmxvZyhcImNoZWNrV2lubmVyIHdhcyBjYWxsZWRcIik7XG4gIGNvbnNvbGUubG9nKGB0dXJucyA9ICR7dHVybnN9YClcbiAgaWYgKFxuICAgIGN1cnJlbnRCb2FyZFswXVswXSAhPSBudWxsICYmXG4gICAgY3VycmVudEJvYXJkWzBdWzBdID09IGN1cnJlbnRCb2FyZFsxXVsxXSAmJlxuICAgIGN1cnJlbnRCb2FyZFswXVswXSA9PSBjdXJyZW50Qm9hcmRbMl1bMl1cbiAgKSB7XG4gICAgY29uc29sZS5sb2coY3VycmVudEJvYXJkWzBdWzBdKTtcbiAgICBjb25zb2xlLmxvZyh0eXBlb2YgY3VycmVudEJvYXJkWzBdWzBdKTtcbiAgICBpZiAoY3VycmVudEJvYXJkWzBdWzBdID09IHllbGxvd1BsYXllcikge1xuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuIHllbGxvd1BsYXllcjtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuIHJlZFBsYXllcjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXG4gICAgY3VycmVudEJvYXJkWzBdWzJdICE9IG51bGwgJiZcbiAgICBjdXJyZW50Qm9hcmRbMF1bMl0gPT0gY3VycmVudEJvYXJkWzFdWzFdICYmXG4gICAgY3VycmVudEJvYXJkWzBdWzJdID09IGN1cnJlbnRCb2FyZFsyXVswXVxuICApIHtcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50Qm9hcmRbMF1bMl0pO1xuICAgIGNvbnNvbGUubG9nKHR5cGVvZiBjdXJyZW50Qm9hcmRbMF1bMl0pO1xuICAgIGlmIChjdXJyZW50Qm9hcmRbMF1bMl0gPT0geWVsbG93UGxheWVyKSB7XG4gICAgICBnYW1lT3ZlciA9IHRydWU7XG4gICAgICByZXR1cm4geWVsbG93UGxheWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYW1lT3ZlciA9IHRydWU7XG4gICAgICByZXR1cm4gcmVkUGxheWVyO1xuICAgIH1cbiAgfVxuICAgIGVsc2V7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgY3VycmVudEJvYXJkW2ldWzBdICE9IG51bGwgJiZcbiAgICAgICAgY3VycmVudEJvYXJkW2ldWzBdID09IGN1cnJlbnRCb2FyZFtpXVsxXSAmJlxuICAgICAgICBjdXJyZW50Qm9hcmRbaV1bMF0gPT0gY3VycmVudEJvYXJkW2ldWzJdXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coY3VycmVudEJvYXJkW2ldWzBdKTtcbiAgICAgICAgY29uc29sZS5sb2codHlwZW9mIGN1cnJlbnRCb2FyZFtpXVswXSk7XG4gICAgICAgIGlmIChjdXJyZW50Qm9hcmRbaV1bMF0gPT0geWVsbG93UGxheWVyKSB7XG4gICAgICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB5ZWxsb3dQbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiByZWRQbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGN1cnJlbnRCb2FyZFswXVtpXSAhPSBudWxsICYmXG4gICAgICAgIGN1cnJlbnRCb2FyZFswXVtpXSA9PSBjdXJyZW50Qm9hcmRbMV1baV0gJiZcbiAgICAgICAgY3VycmVudEJvYXJkWzBdW2ldID09IGN1cnJlbnRCb2FyZFsyXVtpXVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRCb2FyZFtpXVswXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHR5cGVvZiBjdXJyZW50Qm9hcmRbaV1bMF0pO1xuICAgICAgICBpZiAoY3VycmVudEJvYXJkW2ldWzBdID09IHllbGxvd1BsYXllcikge1xuICAgICAgICAgIGdhbWVPdmVyID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiB5ZWxsb3dQbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiByZWRQbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCB0dXJucyA9PT0gMCApe1xuICAgICAgICBnYW1lT3ZlciA9IHRydWVcbiAgICAgICAgcmV0dXJuIG5vYm9keVRleHRcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0R2FtZSgpIHtcbiAgY29uc29sZS5sb2coXCJyZXNldEdhbWUgd2FzIGNhbGxlZFwiKTtcbiAgZ2FtZU92ZXIgPSBmYWxzZTtcbiAgdHVybnMgPSBtYXh0dXJuc1xuICBzZXRCb2FyZChbXSlcbiAgZ2V0Qm9hcmQoKTtcbiAgYmluZENsaWNrcygpXG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRQbGF5ZXIoKTogUGxheWVyIHtcbiAgcmV0dXJuIHBsYXllcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRQbGF5ZXIobmV3Q3VycmVudFBsYXllcjogUGxheWVyKSB7XG4gIHBsYXllciA9IG5ld0N1cnJlbnRQbGF5ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHYW1lT3ZlcigpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdhbWVPdmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R2FtZU92ZXIobmV3R2FtZU92ZXI6IGJvb2xlYW4pIHtcbiAgZ2FtZU92ZXIgPSBuZXdHYW1lT3Zlcjtcbn1cblxuIiwgImltcG9ydCB7IFBsYXllciwgQ2VsbCwgZ2V0Qm9hcmQsIHNldEJvYXJkLCByb3dzLCBjb2x1bW5zIH0gZnJvbSBcIi4vYm9hcmRcIjtcbmltcG9ydCB7XG4gIGNoZWNrV2lubmVyLFxuICB5ZWxsb3dQbGF5ZXIsXG4gIGdldEN1cnJlbnRQbGF5ZXIsXG4gIGdldEdhbWVPdmVyLFxuICByZWRQbGF5ZXIsXG4gIHJlc2V0R2FtZSxcbiAgc2V0Q3VycmVudFBsYXllcixcbiAgc3dpdGNoUGxheWVyLFxuICB0YWtlVHVybixcbiAgbm9ib2R5VGV4dCxcbn0gZnJvbSBcIi4vYWNhZGVteVwiO1xuXG5jb25zdCB3aW5uZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aW5uZXItbmFtZVwiKSE7XG5jb25zdCB3aW5uZXJEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aW5uZXItZGlzcGxheVwiKSE7XG5jb25zdCB2YWxpZENlbGxWYWx1ZXM6IENlbGxbXSA9IFtyZWRQbGF5ZXIsIHllbGxvd1BsYXllciwgbnVsbCwgbm9ib2R5VGV4dCwgdW5kZWZpbmVkXTtcbmNvbnN0IHZhbGlkV2luVmFsdWVzOiBDZWxsW10gPSBbcmVkUGxheWVyLCB5ZWxsb3dQbGF5ZXIsIG5vYm9keVRleHRdO1xuXG5mdW5jdGlvbiBjbGVhckh0bWxHcmlkKCkge1xuICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgcm93czsgcm93SW5kZXgrKykge1xuICAgIGZvciAobGV0IGNvbHVtbkluZGV4ID0gMDsgY29sdW1uSW5kZXggPCBjb2x1bW5zOyBjb2x1bW5JbmRleCsrKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgYHJvdy0ke3Jvd0luZGV4fS1jb2x1bW4tJHtjb2x1bW5JbmRleH1gXG4gICAgICApIS5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZUh0bWxHcmlkV2l0aEJvYXJkU3RhdGUoYm9hcmQ6IENlbGxbXVtdKSB7XG4gIGNvbnNvbGUubG9nKFwicG9wdWxhdGVIdG1sR3JpZFdpdGhCb2FyZFN0YXRlIHdhcyBjYWxsZWQgd2l0aFwiLCBib2FyZCk7XG4gIGNsZWFySHRtbEdyaWQoKTtcbiAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3M7IHJvd0luZGV4KyspIHtcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgY29sdW1uczsgY29sdW1uSW5kZXgrKykge1xuICAgICAgaWYgKCFib2FyZFtyb3dJbmRleF1bY29sdW1uSW5kZXhdKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgY2VsbFBsYXllciA9IGJvYXJkW3Jvd0luZGV4XVtjb2x1bW5JbmRleF0gPT09IHJlZFBsYXllciA/IFwicmVkU2xvdHNcIiA6IFwieWVsbG93U2xvdHNcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICBgcm93LSR7cm93SW5kZXh9LWNvbHVtbi0ke2NvbHVtbkluZGV4fWBcbiAgICAgICkhLmNsYXNzTmFtZSA9IGNlbGxQbGF5ZXI7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRSb3dPckNvbHVtbihhcnJheU9mQ2VsbHM6IENlbGxbXSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnJheU9mQ2VsbHMpICYmIGFycmF5T2ZDZWxscy5sZW5ndGggPT09IHJvd3M7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRDb2x1bW4oY29sdW1uQXJyYXk6IENlbGxbXSkge1xuICByZXR1cm4gKFxuICAgIGlzVmFsaWRSb3dPckNvbHVtbihjb2x1bW5BcnJheSkgJiZcbiAgICBjb2x1bW5BcnJheS5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIHZhbGlkQ2VsbFZhbHVlcy5pbmNsdWRlcyhpdGVtKTtcbiAgICB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBwb3NpdGlvbkNsaWNrKHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcikge1xuICBjb25zb2xlLmxvZyhcbiAgICBgcG9zaXRpb25DbGljayB3YXMgY2FsbGVkIHdpdGggcm93SW5kZXg9JHtyb3d9LCBjb2x1bW5JbmRleD0ke2NvbHVtbn0sYFxuICApO1xuICBjb25zdCBvbGRCb2FyZCA9IHN0cnVjdHVyZWRDbG9uZShnZXRCb2FyZCgpKTtcbiAgY29uc3QgYm9hcmQgPSB0YWtlVHVybihcbiAgICByb3csXG4gICAgY29sdW1uLFxuICAgIGdldEdhbWVPdmVyKCksXG4gICAgZ2V0Qm9hcmQoKSxcbiAgICBnZXRDdXJyZW50UGxheWVyKClcbiAgKTtcbiAgLy8gY29uc29sZS5sb2coYG9sZCBib2FyZDogJHtvbGRCb2FyZH0gYClcbiAgLy8gY29uc29sZS5sb2coYG5ldyBib2FyZDogJHtib2FyZH0gYClcbiAgaWYgKEpTT04uc3RyaW5naWZ5KGJvYXJkKSAhPT0gSlNPTi5zdHJpbmdpZnkob2xkQm9hcmQpKSB7XG4gICAgc2V0Qm9hcmQoYm9hcmQpO1xuICAgIHNldEN1cnJlbnRQbGF5ZXIoc3dpdGNoUGxheWVyKGdldEN1cnJlbnRQbGF5ZXIoKSkpO1xuXG4gICAgLy8gaWYgKCFpc1ZhbGlkUm93T3JDb2x1bW4oYm9hcmRbMF0pIHx8ICFib2FyZC5ldmVyeShpc1ZhbGlkQ29sdW1uKSkge1xuICAgIC8vICAgdGhyb3cgYEV4cGVjdGluZyBcImdldEJvYXJkXCIgdG8gcmV0dXJuIGEgMmQgYXJyYXkgd2hlcmUgYWxsIHZhbHVlcyBhcmUgb25lIG9mIHRoZSBzdHJpbmdzICR7dmFsaWRDZWxsVmFsdWVzfS4gQWN0dWFsbHkgcmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkoYm9hcmQpfWA7XG4gICAgLy8gfVxuICAgIHBvcHVsYXRlSHRtbEdyaWRXaXRoQm9hcmRTdGF0ZShib2FyZCk7XG4gICAgY29uc3Qgd2lubmVyID0gY2hlY2tXaW5uZXIoYm9hcmQpO1xuICAgIGNvbnNvbGUubG9nKHdpbm5lcik7XG4gICAgaWYgKHdpbm5lcikge1xuICAgICAgaWYgKHR5cGVvZiB3aW5uZXIgIT09IFwic3RyaW5nXCIgfHwgIXZhbGlkV2luVmFsdWVzLmluY2x1ZGVzKHdpbm5lcikpIHtcbiAgICAgICAgdGhyb3cgYEV4cGVjdGluZyBcImNoZWNrV2lubmVyXCIgdG8gcmV0dXJuIG51bGwgb3Igb25lIG9mIHRoZSBzdHJpbmdzICR7dmFsaWRXaW5WYWx1ZXN9LiBBY3R1YWxseSByZWNlaXZlZDogJHt3aW5uZXJ9YDtcbiAgICAgIH1cbiAgICAgIGlmICh3aW5uZXIgPT09IDApIHtcbiAgICAgICAgd2lubmVyRGlzcGxheS5pbm5lclRleHQgPSBcIkl0cyBhIGRyYXcsIHlvdSBib3RoIGxvc2VcIjtcbiAgICAgICAgd2lubmVyRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2lubmVyRGlzcGxheS5pbm5lclRleHQgPSBgVGhlIHdpbm5lciBpcyAke3dpbm5lcn1gO1xuICAgICAgfVxuICAgICAgd2lubmVyRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNldENsaWNrKGV2ZW50OiBhbnkpIHtcbiAgcmVzZXRHYW1lKCk7XG4gIHdpbm5lckRpc3BsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICBjbGVhckh0bWxHcmlkKCk7XG59XG5cbi8vIEJpbmQgdGhlIGNsaWNrIGV2ZW50cyBmb3IgdGhlIGdyaWQuXG5leHBvcnQgY29uc3QgYmluZENsaWNrcyA9ICgpID0+IHtcbiAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3M7IHJvd0luZGV4KyspIHtcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgY29sdW1uczsgY29sdW1uSW5kZXgrKykge1xuICAgICAgY29uc3QgZ3JpZFBvc2l0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgIGByb3ctJHtyb3dJbmRleH0tY29sdW1uLSR7Y29sdW1uSW5kZXh9YFxuICAgICAgKSE7XG4gICAgICBncmlkUG9zaXRpb24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICBwb3NpdGlvbkNsaWNrLmJpbmQobnVsbCwgcm93SW5kZXgsIGNvbHVtbkluZGV4KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0LWJ1dHRvbicpIVxucmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldENsaWNrKVxucmVzZXRHYW1lKCk7XG4iXSwKICAibWFwcGluZ3MiOiAibUJBTUEsSUFBSUEsRUFBaUIsQ0FBQyxFQUVoQkMsRUFBYSxJQUFNLENBQ3ZCLFFBQVNDLEVBQVcsRUFBR0EsRUFBVyxFQUFNQSxJQUFZLENBQ2xELElBQUlDLEVBQVMsU0FBUyxjQUFjLEtBQUssRUFDekNBLEVBQU8sYUFBYSxLQUFNLE9BQU9ELENBQVEsRUFBRSxFQUMzQ0MsRUFBTyxhQUFhLFFBQVMsVUFBVSxFQUN2QyxTQUFTLGVBQWUsTUFBTSxFQUFHLE9BQU9BLENBQU0sRUFDOUNILEVBQUssS0FBSyxDQUFDLENBQUMsRUFDWixRQUFTSSxFQUFjLEVBQUdBLEVBQWMsRUFBU0EsSUFBZSxDQUM5REosRUFBS0UsQ0FBUSxFQUFFLEtBQUssSUFBSSxFQUN4QixJQUFJRyxFQUFTLFNBQVMsY0FBYyxLQUFLLEVBQ3pDQSxFQUFPLGFBQWEsS0FBTSxPQUFPSCxDQUFRLFdBQVdFLENBQVcsRUFBRSxFQUNqRUMsRUFBTyxhQUFhLFFBQVMsWUFBWSxFQUN6QyxTQUFTLGVBQWUsT0FBT0gsQ0FBUSxFQUFFLEVBQUcsT0FBT0csQ0FBTSxDQUMzRCxDQUNGLENBQ0EsUUFBUSxJQUFJTCxDQUFJLEVBQ2hCLFFBQVEsSUFBSSx1QkFBdUIsQ0FDckMsRUFFYU0sRUFBVyxNQUNsQk4sRUFBSyxPQUFTLEdBQUtBLEdBQVEsT0FDN0JDLEVBQVcsRUFFTkQsR0FFSU8sRUFBWUMsR0FBdUIsQ0FDOUNSLEVBQU9RLENBQ1QsRUNoQ08sSUFBTUMsRUFBWSxFQUNaQyxFQUFlLEVBQ2ZDLEVBQWEsRUFDdEJDLEVBQWlCLEVBQ2pCQyxFQUFvQixHQUNwQkMsRUFBUSxHQUVMLFNBQVNDLEVBQ2RDLEVBQ0FDLEVBQ0FDLEVB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LCAiY29sdW1uSW5kZXgiLCAiY29sRGl2IiwgImdldEJvYXJkIiwgInNldEJvYXJkIiwgIm5ld0JvYXJkIiwgInJlZFBsYXllciIsICJ5ZWxsb3dQbGF5ZXIiLCAibm9ib2R5VGV4dCIsICJwbGF5ZXIiLCAiZ2FtZU92ZXIiLCAidHVybnMiLCAidGFrZVR1cm4iLCAicm93SW5kZXgiLCAiY29sdW1uSW5kZXgiLCAiY3VycmVudEdhbWVPdmVyIiwgImN1cnJlbnRCb2FyZCIsICJjdXJyZW50UGxheWVyIiwgInNldEJvYXJkIiwgInNldEdhbWVPdmVyIiwgImdldEJvYXJkIiwgInN3aXRjaFBsYXllciIsICJjaGVja1dpbm5lciIsICJpIiwgInJlc2V0R2FtZSIsICJiaW5kQ2xpY2tzIiwgImdldEN1cnJlbnRQbGF5ZXIiLCAic2V0Q3VycmVudFBsYXllciIsICJuZXdDdXJyZW50UGxheWVyIiwgImdldEdhbWVPdmVyIiwgIm5ld0dhbWVPdmVyIiwgIndpbm5lck5hbWUiLCAid2lubmVyRGlzcGxheSIsICJ2YWxpZFdpblZhbHVlcyIsICJyZWRQbGF5ZXIiLCAieWVsbG93UGxheWVyIiwgIm5vYm9keVRleHQiLCAiY2xlYXJIdG1sR3JpZCIsICJyb3dJbmRleCIsICJjb2x1bW5JbmRleCIsICJwb3B1bGF0ZUh0bWxHcmlkV2l0aEJvYXJkU3RhdGUiLCAiYm9hcmQiLCAiY2VsbFBsYXllciIsICJwb3NpdGlvbkNsaWNrIiwgInJvdyIsICJjb2x1bW4iLCAib2xkQm9hcmQiLCAiZ2V0Qm9hcmQiLCAiYm9hcmQiLCAidGFrZVR1cm4iLCAiZ2V0R2FtZU92ZXIiLCAiZ2V0Q3VycmVudFBsYXllciIsICJzZXRCb2FyZCIsICJzZXRDdXJyZW50UGxheWVyIiwgInN3aXRjaFBsYXllciIsICJwb3B1bGF0ZUh0bWxHcmlkV2l0aEJvYXJkU3RhdGUiLCAid2lubmVyIiwgImNoZWNrV2lubmVyIiwgInZhbGlkV2luVmFsdWVzIiwgIndpbm5lckRpc3BsYXkiLCAicmVzZXRDbGljayIsICJldmVudCIsICJyZXNldEdhbWUiLCAiY2xlYXJIdG1sR3JpZCIsICJiaW5kQ2xpY2tzIiwgInJvd0luZGV4IiwgImNvbHVtbkluZGV4IiwgInJlc2V0QnV0dG9uIl0KfQo=
